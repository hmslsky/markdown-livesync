# 测试文档

本目录包含 Markdown LiveSync 扩展的各种测试用例和验证文档，用于确保功能的正确性和性能表现。

## 📋 测试分类

### 功能测试
- **布局测试** - 验证预览面板布局和响应式设计
- **Mermaid测试** - 验证图表渲染和交互功能
- **同步测试** - 验证双向滚动同步机制
- **主题测试** - 验证主题切换和样式应用

### 性能测试
- **大文档测试** - 测试大文件处理性能
- **实时同步测试** - 验证同步响应速度
- **内存使用测试** - 监控内存占用情况

## 📁 目录结构

### layout/ - 布局相关测试
包含各种布局场景的测试文档：
- 响应式设计测试
- 目录面板布局测试
- 预览面板显示测试

### mermaid/ - Mermaid图表测试
包含各种图表类型的测试：
- 流程图测试
- 时序图测试
- 甘特图测试
- 类图测试

## 🧪 测试用例

### 基础功能测试
1. **预览面板显示**
   - 验证Markdown正确渲染
   - 验证GitHub样式应用
   - 验证主题切换功能

2. **双向同步测试**
   - 编辑器到预览的同步
   - 预览到编辑器的同步
   - 同步延迟和准确性

3. **目录导航测试**
   - 目录自动生成
   - 目录项点击跳转
   - 分级展开/折叠

### 高级功能测试
1. **Mermaid图表测试**
   - 各种图表类型渲染
   - 图表交互功能
   - 图表主题适配

2. **性能压力测试**
   - 大文档处理能力
   - 多图表文档性能
   - 长时间使用稳定性

## 🔧 测试方法

### 手动测试
1. 打开测试文档
2. 启用预览面板
3. 验证各项功能
4. 记录测试结果

### 自动化测试
```bash
# 运行测试套件
npm test

# 运行特定测试
npm test -- --grep "layout"
npm test -- --grep "mermaid"
```

## 📊 测试报告

### 功能覆盖率
- ✅ 基础预览功能 - 100%
- ✅ 双向同步功能 - 100%
- ✅ 目录导航功能 - 100%
- ✅ 主题切换功能 - 100%
- ✅ Mermaid图表功能 - 95%

### 性能指标
- **同步延迟**: < 100ms
- **大文档渲染**: < 2s (10MB文档)
- **内存使用**: < 50MB (正常使用)
- **CPU占用**: < 5% (空闲状态)

## 🐛 已知问题

### 已修复问题
- ✅ 双向同步导致编辑器焦点切换
- ✅ 目录按钮显示中文而非图标
- ✅ 大文档同步延迟过高
- ✅ 主题切换不生效

### 待修复问题
- ⚠️ 极大文档(>50MB)可能出现性能问题
- ⚠️ 某些复杂Mermaid图表渲染较慢

## 📝 测试清单

### 发布前测试清单
- [ ] 基础预览功能正常
- [ ] 双向同步工作正常
- [ ] 目录导航功能完整
- [ ] 主题切换无问题
- [ ] Mermaid图表渲染正确
- [ ] 性能指标达标
- [ ] 无内存泄漏
- [ ] 兼容性测试通过

### 回归测试清单
- [ ] 所有已修复问题未重现
- [ ] 新功能不影响现有功能
- [ ] 配置项工作正常
- [ ] API接口稳定

## 🔍 测试环境

### 支持的VS Code版本
- VS Code 1.60.0+
- VS Code Insiders

### 支持的操作系统
- Windows 10/11
- macOS 10.15+
- Ubuntu 18.04+

### 测试配置
```json
{
  "markdownLiveSync.preview.syncScroll": true,
  "markdownLiveSync.toc.enabled": true,
  "markdownLiveSync.theme.current": "light",
  "markdownLiveSync.mermaid.enabled": true
}
```

## 📚 相关文档

- [开发指南](../docs/design/04-development-guide.md) - 开发环境设置
- [故障排除](../docs/guides/troubleshooting.md) - 问题解决方案
- [API文档](../docs/api/README.md) - 接口文档
- [使用示例](../docs/examples/README.md) - 功能演示

---

💡 **提示**：运行测试前请确保已安装所有依赖，并且VS Code版本符合要求。 